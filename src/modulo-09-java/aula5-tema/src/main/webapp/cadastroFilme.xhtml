<?xml version="1.0" encoding="UTF-8"?>
<ui:composition 

    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:jsf="http://xmlns.jcp.org/jsf"
    template="/templates/template.xhtml"
    xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="form">
        <h:messages id="messages"></h:messages>

        <div class="form-group"> 
            <h:outputLabel for="titulo" value="#{bundle.filme_titulo}"></h:outputLabel>
            <h:inputText id="titulo" value="#{filmeManagedBean.filme.titulo}" class="form-control"/>
        </div>

        <div class="form-group"> 
            <h:outputLabel for="data-lancamento" value="#{bundle.filme_dataLancamento}"></h:outputLabel>
            <input id="data-lancamento" type="date" jsf:value="#{filmeManagedBean.dataLancamento}" class="form-control"/>
        </div>

        <div class="form-group">
            <h:outputLabel for="diretor" value="#{bundle.filme_diretor}"></h:outputLabel>
            <h:inputText id="diretor" value="#{filmeManagedBean.filme.diretor}" styleClass="form-control"/>
        </div>

        <div class="form-group"> 
            <h:outputLabel for="classificacao" value="#{bundle.filme_classificacao}"></h:outputLabel>
            <h:selectOneMenu id="classificacao" value="#{filmeManagedBean.idClassificacao}" styleClass="form-control">
                <f:selectItems value="#{filmeManagedBean.classificacoes}" var="classificacao" 
                               itemValue="#{classificacao.id}" itemLabel="#{classificacao.descricao}"/>
            </h:selectOneMenu>

        </div>

        <div class="form-group">
            <h:outputLabel for="elenco" value="#{bundle.filme_elenco}"></h:outputLabel>
            <h:selectOneMenu id="elenco" value="#{filmeManagedBean.idElenco}" styleClass="form-control">
                <f:selectItems value="#{filmeManagedBean.elencos}" var="elenco" 
                               itemValue="#{elenco.id}" itemLabel="#{elenco.nome}"/>
            </h:selectOneMenu> 
        </div>

        <div class="form-group">
            <h:outputLabel for="genero" value="#{bundle.filme_genero}"></h:outputLabel>
            <h:selectOneMenu id="genero" value="#{filmeManagedBean.idGenero}" styleClass="form-control">
                <f:selectItems value="#{filmeManagedBean.generos}" var="genero" 
                               itemValue="#{genero.id}" itemLabel="#{genero.descricao}"/>
            </h:selectOneMenu>
        </div>

        <div class="form-group">
            <h:outputLabel for="idioma" value="#{bundle.filme_idioma}"></h:outputLabel>
            <h:selectOneMenu id="idioma" value="#{filmeManagedBean.idIdiomas}" styleClass="form-control">
                <f:selectItems value="#{filmeManagedBean.idiomas}" var="idioma" 
                               itemValue="#{idioma.id}" itemLabel="#{idioma.nome}"/>
            </h:selectOneMenu> 
        </div>

        <h:commandButton type="submit" value="Enviar" styleClass="btn btn-success" action="#{filmeManagedBean.adicionar}">    
            <f:ajax execute="@form" render="@form" />
        </h:commandButton>


        <h:dataTable id="filmes" value="#{filmeManagedBean.filmes}" var="filme" styleClass="table table-hover">
            <h:column>
                <f:facet name="header">
                    <h:outputText value="#{bundle.filme_id}"/>
                </f:facet>
                <h:outputText value="#{filme.id}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="#{bundle.filme_titulo}"/>
                </f:facet>
                <h:outputText value="#{filme.titulo}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="#{bundle.filme_dataLancamento}"/>
                </f:facet>
                <h:outputText value="#{filmeManagedBean.converterDataLancamento(filme)}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="#{bundle.filme_diretor}"/>
                </f:facet>
                <h:outputText value="#{filme.diretor}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="#{bundle.filme_classificacao}"/>
                </f:facet>
                <h:outputText value="#{filme.classificacao.descricao}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="#{bundle.filme_elenco}"/>
                </f:facet>
                <h:outputText value="#{filme.elenco.nome}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="#{bundle.filme_genero}"/>
                </f:facet>
                <h:outputText value="#{filme.genero.descricao}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="#{bundle.filme_idioma}"/>
                </f:facet>
                <h:outputText value="#{filme.idioma.nome}"/>
            </h:column>

        </h:dataTable>       
    </ui:define>

</ui:composition>
